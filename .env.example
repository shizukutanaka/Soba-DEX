# =================================
# DEX Platform Environment Variables
# =================================

# ---------------------------------
# Server Configuration
# ---------------------------------
NODE_ENV=production
PORT=3001
HOST=0.0.0.0
SERVER_KEEP_ALIVE_TIMEOUT_MS=5000
SERVER_HEADERS_TIMEOUT_MS=6000
SERVER_REQUEST_TIMEOUT_MS=120000

# ---------------------------------
# Security (REQUIRED)
# ---------------------------------
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-at-least-32-characters-long-change-this-in-production
API_KEY_HMAC_SECRET=your-super-secret-api-key-hmac-at-least-32-characters-long-change-this-in-production

# JWT Token Expiry
JWT_ACCESS_EXPIRY=24h
JWT_REFRESH_EXPIRY=7d

# ---------------------------------
# CORS Configuration
# ---------------------------------
# Comma-separated list of allowed origins
# Development default keeps localhost
# IMPORTANT: Define real domains for production and avoid placeholders
CORS_ORIGINS=http://localhost:3000,https://localhost:3000
# CORS_HTTP_WHITELIST=

# ---------------------------------
# Rate Limiting
# ---------------------------------
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60000
LOGIN_RATE_LIMIT_MAX=5
LOGIN_RATE_LIMIT_WINDOW=900000
REQUEST_ID_TRUST_HEADER=true
API_KEY_TTL_MS=7776000000
AUTONOMY_HEALTH_INTERVAL_MS=15000
AUTONOMY_ERROR_THRESHOLD=10
AUTONOMY_RECOVERY_COOLDOWN_MS=60000
AUTONOMY_BACKUP_INTERVAL_MS=3600000
AUTONOMY_PERSISTENCE_THRESHOLD_MS=60000
AUTONOMY_AUTH_INTERVAL_MS=900000
AUTONOMY_AUDIT_INTERVAL_MS=300000

# ---------------------------------
# Logging
# ---------------------------------
LOG_LEVEL=info
LOG_DIR=logs
LOG_MAX_SIZE=10485760
LOG_MAX_FILES=5
X_REQUEST_ID_HEADER=X-Request-ID

# ---------------------------------
# Blockchain Configuration
# ---------------------------------
# BLOCKCHAIN_RPC_URL=
BLOCKCHAIN_NETWORK=mainnet
# CONTRACT_ADDRESS=

# ---------------------------------
# WebSocket Configuration
# ---------------------------------
WS_PORT=3002
WS_HEARTBEAT_INTERVAL=30000
WS_MAX_CONNECTIONS=1000

# ---------------------------------
# Database Configuration (Required for Production)
# ---------------------------------
DB_HOST=localhost
DB_PORT=5432
DB_NAME=soba_dex
DB_USER=postgres
DB_PASSWORD=your_secure_password_here

# Database Sharding (v5.0)
ENABLE_SHARDING=true
SHARD_COUNT=4
DB_POOL_MIN=2
DB_POOL_MAX=10

# ---------------------------------
# Redis Configuration (Required for Production)
# ---------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_here
REDIS_DB=0

# Redis Cluster
REDIS_CLUSTER_ENABLED=false
REDIS_CLUSTER_NODES=redis-1:6379,redis-2:6379,redis-3:6379

# Multi-layer Caching (v5.0)
L1_CACHE_SIZE=1000
L2_CACHE_ENABLED=true
CACHE_HIT_RATE_TARGET=0.85

# ---------------------------------
# Monitoring & Observability (v2.9.0+)
# ---------------------------------
# SENTRY_DSN=
# PROMETHEUS_PORT=9090
# METRICS_ENABLED=true

# Prometheus Metrics (v2.9.0)
PROMETHEUS_ENABLED=true
PROMETHEUS_COLLECT_DEFAULT=true

# OpenTelemetry Tracing (v3.0.0)
OTEL_ENABLED=true
OTEL_SERVICE_NAME=soba-dex-backend
OTEL_SERVICE_VERSION=3.1.0
OTEL_EXPORTER_TYPE=console
# OTEL_EXPORTER_TYPE=jaeger
# OTEL_JAEGER_ENDPOINT=http://localhost:14268/api/traces
# OTEL_EXPORTER_TYPE=zipkin
# OTEL_ZIPKIN_ENDPOINT=http://localhost:9411/api/v2/spans
# OTEL_EXPORTER_TYPE=otlp
# OTEL_OTLP_ENDPOINT=http://localhost:4318/v1/traces

# OpenTelemetry Sampling
OTEL_SAMPLING_RATE=1.0
OTEL_TRACE_ID_RATIO=1.0

# Trace Analytics (v3.1.0)
ANALYTICS_ENABLED=true
ANOMALY_THRESHOLD=3
REGRESSION_THRESHOLD=0.5
ANALYTICS_INTERVAL=60000

# SLO Monitoring (v3.1.0)
SLO_ENABLED=true
SLO_CHECK_INTERVAL=60000

# Baseline Management (v3.1.0)
BASELINE_ROLLING_WINDOW=7
BASELINE_UPDATE_INTERVAL=3600000

# ---------------------------------
# Email/Notifications (v3.1.0+)
# ---------------------------------
# SMTP Configuration for Alerting
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
SMTP_FROM=alerts@soba.com

# Alert Notification Channels (v3.1.0)
ALERT_EMAIL=team@soba.com
ALERT_WEBHOOK_URL=
ALERT_DEDUP_WINDOW=300000

# ---------------------------------
# Real User Monitoring (v3.2.0)
# ---------------------------------
# RUM Service
RUM_ENABLED=true
RUM_RETENTION_DAYS=30
RUM_SAMPLE_RATE=1.0
RUM_APDEX_THRESHOLD=2500
RUM_SLOW_PAGE_THRESHOLD=3000
RUM_BATCH_SIZE=100
RUM_BATCH_INTERVAL=10000

# Trace Correlation
TRACE_CORRELATION_ENABLED=true
TRACE_CORRELATION_RETENTION=60
TRACE_CORRELATION_MAX_SPANS=1000

# Web Vitals Thresholds
RUM_LCP_THRESHOLD_GOOD=2500
RUM_LCP_THRESHOLD_POOR=4000
RUM_FID_THRESHOLD_GOOD=100
RUM_FID_THRESHOLD_POOR=300
RUM_CLS_THRESHOLD_GOOD=0.1
RUM_CLS_THRESHOLD_POOR=0.25

# ---------------------------------
# Feature Flags
# ---------------------------------
ENABLE_SWAGGER=false
ENABLE_RATE_LIMITING=true
ENABLE_COMPRESSION=true
ENABLE_HELMET=true
ENABLE_CORS=true

# ---------------------------------
# Performance Tuning
# ---------------------------------
MAX_REQUEST_SIZE=10mb
COMPRESSION_THRESHOLD=1024
CACHE_TTL=300
REQUEST_TIMEOUT=30000

# ---------------------------------
# DEX Aggregation (v5.0 - NEW)
# ---------------------------------
DEX_AGGREGATION_ENABLED=true
ENABLED_DEXS=soba,uniswapV2,uniswapV3,sushiswap,curve,balancer
UNISWAP_SUBGRAPH_URL=https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v3
SUSHISWAP_SUBGRAPH_URL=https://api.thegraph.com/subgraphs/name/sushiswap/exchange

# Smart Order Router (v5.0)
SOR_MAX_HOPS=4
SOR_MAX_SPLITS=3
SOR_MAX_PATHS=20

# ---------------------------------
# MEV Protection (v5.0 - NEW)
# ---------------------------------
MEV_PROTECTION_ENABLED=true
FLASHBOTS_RELAY_URL=https://relay.flashbots.net
FLASHBOTS_AUTH_KEY=your_flashbots_auth_key

# ---------------------------------
# Message Queue (v5.0 - NEW)
# ---------------------------------
QUEUE_ENABLED=true
QUEUE_CONCURRENCY=5
QUEUE_ATTEMPTS=3
QUEUE_BACKOFF_DELAY=5000

# ---------------------------------
# Cross-Chain Bridge (v5.0)
# ---------------------------------
BRIDGE_ENABLED=true
BRIDGE_VALIDATOR_COUNT=5
BRIDGE_CONFIRMATION_BLOCKS=12
SUPPORTED_CHAINS=ethereum,bsc,polygon,arbitrum,optimism

# ---------------------------------
# Stable Swap & Weighted Pools (v5.0 - NEW)
# ---------------------------------
STABLE_SWAP_ENABLED=true
WEIGHTED_POOL_ENABLED=true
STABLE_SWAP_FEE=4
WEIGHTED_POOL_FEE=30

# ---------------------------------
# Governance (v5.0)
# ---------------------------------
GOVERNANCE_ENABLED=true
GOVERNANCE_TOKEN_ADDRESS=0x0000000000000000000000000000000000000000
PROPOSAL_THRESHOLD=100000
VOTING_PERIOD=604800
QUORUM_VOTES=4000000

# ---------------------------------
# External Services
# ---------------------------------
# Threat Intelligence
ABUSEIPDB_API_KEY=your_abuseipdb_api_key
VIRUSTOTAL_API_KEY=your_virustotal_api_key

# Notifications
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR_WEBHOOK_URL
PAGERDUTY_API_KEY=your_pagerduty_api_key

# ---------------------------------
# Development Only
# ---------------------------------
# DEBUG=*
# VERBOSE_LOGGING=true
MOCK_BLOCKCHAIN=false
TEST_MNEMONIC=test test test test test test test test test test test junk

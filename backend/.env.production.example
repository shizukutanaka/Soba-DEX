# Soba DEX - Production Environment Configuration
# Version: 2.6.1
# IMPORTANT: Update all values before deploying to production

# =====================
# APPLICATION
# =====================
NODE_ENV=production
PORT=3001
HOST=0.0.0.0

# =====================
# DATABASE
# =====================
# PostgreSQL connection string
# IMPORTANT: Use strong password and restrict access
DATABASE_URL=postgresql://soba_user:CHANGE_THIS_PASSWORD@postgres:5432/soba_dex

# Database connection pool settings
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_CONNECTION_TIMEOUT=30000

# =====================
# REDIS CACHE
# =====================
REDIS_URL=redis://:CHANGE_THIS_PASSWORD@redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_PASSWORD
REDIS_DB=0

# Cache settings
CACHE_ENABLED=true
CACHE_TTL=300000
CACHE_MAX_SIZE=10000

# =====================
# SECURITY - CRITICAL
# =====================
# IMPORTANT: Generate strong secrets with:
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
#
# WARNING: These MUST be different from the examples below!
JWT_SECRET=CHANGE_THIS_TO_STRONG_RANDOM_64_CHAR_HEX_STRING_MIN_32_CHARS
API_KEY_HMAC_SECRET=CHANGE_THIS_TO_STRONG_RANDOM_64_CHAR_HEX_STRING_MIN_32_CHARS
SESSION_SECRET=CHANGE_THIS_TO_STRONG_RANDOM_64_CHAR_HEX_STRING_MIN_32_CHARS

# Session settings
SESSION_MAX_AGE=86400000

# =====================
# CORS
# =====================
# IMPORTANT: Set to your production domain(s) only
# NEVER use '*' in production
CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com

# =====================
# LOGGING
# =====================
LOG_LEVEL=info
LOG_DIR=/app/logs
LOG_MAX_FILES=30d
LOG_MAX_SIZE=50m

# =====================
# RATE LIMITING
# =====================
# Adjust based on expected traffic
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX=100

# =====================
# FEATURE FLAGS
# =====================
USE_MOCK_DATA=false
ENABLE_SWAGGER=false
ENABLE_WEBSOCKET=true

# =====================
# BLOCKCHAIN
# =====================
# IMPORTANT: Use production RPC endpoints with proper API keys
ETH_RPC_URL=https://mainnet.infura.io/v3/YOUR_PRODUCTION_INFURA_PROJECT_ID
ETH_CHAIN_ID=1

# Backup RPC for failover
ETH_RPC_URL_BACKUP=https://eth-mainnet.g.alchemy.com/v2/YOUR_PRODUCTION_ALCHEMY_KEY

# =====================
# EXTERNAL APIs
# =====================
# CoinGecko Pro API (recommended for production)
COINGECKO_API_URL=https://pro-api.coingecko.com/api/v3
COINGECKO_API_KEY=YOUR_COINGECKO_PRO_API_KEY

# Etherscan API
ETHERSCAN_API_KEY=YOUR_PRODUCTION_ETHERSCAN_API_KEY
ETHERSCAN_API_URL=https://api.etherscan.io/api

# =====================
# MONITORING & ALERTS
# =====================
# Sentry DSN for error tracking (optional)
SENTRY_DSN=

# Email alerts (optional)
ALERT_EMAIL_FROM=
ALERT_EMAIL_TO=
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=

# =====================
# PRODUCTION OPTIMIZATION
# =====================
# Number of PM2 instances (set to 'max' to use all CPU cores)
PM2_INSTANCES=max

# Prisma settings
PRISMA_LOG_LEVEL=warn

# =====================
# SECURITY CHECKLIST
# =====================
# Before deploying to production, ensure:
# [ ] All secrets are changed from defaults
# [ ] Database password is strong and unique
# [ ] Redis password is set
# [ ] CORS_ORIGIN is set to production domain only
# [ ] USE_MOCK_DATA is set to false
# [ ] SSL certificates are installed
# [ ] Firewall rules are configured
# [ ] Database backups are configured
# [ ] Monitoring is set up
# [ ] Rate limits are appropriate for expected traffic
